<!-- TODO: Include only one code for all pages (DRY) -->
<footer class="ctn-footer">
    <div class="ctn_bg2">
        <div class="bg"></div>
    </div>
    <div class="ctn-footer-content">
        <div class="ctn-footer-content-items">
            <h1>EPIS UNH</h1>
            <br>
            <span>
                Email: <a href="" class="style-linkAll" id="footer_email_id" target="_blank">ep.sistemas@unh.edu.pe</a>
                - Teléfono: <a  href="" class="style-linkAll" id="footer_phone_id" target="_blank">+51 952850467</a> 
                <br>
                <span id="footer_address_id">Av. Perú S/N</span>
            </span>

            <div class="ctn-footer-content-social gap-3">
                <a href="https://www.facebook.com/SistemasUNH/" target="_blank"><i class="fa-brands fa-facebook effect"></i></a>
                <a href="https://www.instagram.com/SistemasUNH/" target="_blank"><i class="fa-brands fa-twitter effect"></i></a>
                <a href="https://www.youtube.com/@escuelaprofesionaldeingeni4998" target="_blank"><i class="fa-brands fa-youtube effect"></i></a>
                <a href="https://www.instagram.com/SistemasUNH/" target="_blank"><i class="fa-brands fa-instagram effect"></i></a>
                <a href="https://www.linkedin.com/company/sistemasunh/" target="_blank"><i class="fa-brands fa-linkedin effect"></i></a>
            </div>
        </div>
    </div>

</footer>
<div class="ctn-copyright">
    <span>Copyright ©<script>document.write(new Date().getFullYear())</script>, EPIS UNH - Todos los derechos reservados</span>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function(event) { 

        //Temporal link
        const url_api = "https://sistemas.unh.edu.pe/dev_v1/api/contacto.php";
        actualizarFooter(url_api);
        
        async function actualizarFooter(url) {
            const result = await fetch(url)
            .then(res => res.json())
            .then(res => {
                    console.log(res);
                    if (res.code == '200') {
                        const email = res.data[0].email;
                        const nro_celular = res.data[0].celular;
                        const direccion = res.data[0].direccion;

                        const emailElement = document.getElementById("footer_email_id");
                        emailElement.textContent = email;
                        emailElement.setAttribute('href', `mailto:${email}`);

                        const direccionElement = document.getElementById("footer_address_id");
                        direccionElement.textContent = direccion;

                        const phoneElement = document.getElementById("footer_phone_id");
                        phoneElement.textContent = `+51 ${nro_celular}`;
                        phoneElement.setAttribute('href', `https://api.whatsapp.com/send?phone=+51${nro_celular}&text=Hola, Necesito más información!`);
                    } else {
                        console.log('No se pudo obtener los datos :(');
                    }
                })
                .catch(err => console.error(err));
        }
        
    });


</script>